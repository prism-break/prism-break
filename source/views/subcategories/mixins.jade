mixin subcategory-head(data)
  .card.text.max
    .btn-rectangle
      .small
        a(href=routes.root)
          = t.Platforms
        = ' / '
        a(href=routes.categories + data.category.slug)
          = data.category.name
        = ' / '
      .title= t[data.subcategory.name]

mixin subcategory-title(category, subcategory)
  a.bar.title(id=subcategory.slug href="#{routes.subcategories}#{category.slug}-#{subcategory.slug}")
    .label= t[subcategory.name]

mixin subcategory-title-nolink(subcategory)
  .bar.title(id=subcategory.slug)
    .label= t[subcategory.name]

mixin subcategory-notes(subcategory)
  - var categoryNotes = t[subcategory.slug + '-notes']
  - var projectNotes = subcategory.projects.map(function(project) { return project.notes !== "" ? project.notes.replace(/\n/g, " ").replace(project.name, "**$&**") + "\n\n" : ""; }).join("")
  - if ((categoryNotes !== "--" && categoryNotes !== undefined) || projectNotes !== "")
    .section.notes 
      .pipe= t.Notes

      - if (categoryNotes !== "--" && categoryNotes !== undefined)
        .text-block!= categoryNotes

      - if (projectNotes !== "")
        .text-block!= h.marked(projectNotes)
